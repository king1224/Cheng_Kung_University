#include "msp430.h"                     ; #define controlled include file

        NAME    main                    ; module name

        PUBLIC  main                    ; make the main label vissible
                                        ; outside this module
        ORG     0FFFEh
        DC16    init                    ; set reset vector to 'init' label

        RSEG    CSTACK                  ; pre-declaration of segment
        RSEG    CODE                    ; place program in 'CODE' segment

init:   MOV     #SFE(CSTACK), SP        ; set up stack

main:   NOP                             ; main program
        MOV.W   #WDTPW+WDTHOLD,&WDTCTL  ; Stop watchdog timer
        
        mov.b   #00000000b, &P1SEL
        mov.b   #01111100b, &P1DIR
        mov.b   #00000000b, &P1OUT
        
        mov.b   #00000000b, &P2SEL
        mov.b   #11111101b, &P2DIR
        mov.b   #00000000b, &P2OUT

        mov.b   #00000000b, &P3SEL
        mov.b   #11111111b, &P3DIR
        mov.b   #00000000b, &P3OUT
        
        mov.b   #00000000b, &P4SEL
        mov.b   #00001111b, &P4DIR
        mov.b   #00000000b, &P4OUT
               
        mov.b   #00000000b, &P6SEL
        mov.b   #01111111b, &P6DIR
        mov.b   #00000000b, &P6OUT               
               
        mov.b   #00000000b, &P7SEL
        mov.b   #00010001b, &P7DIR
        mov.b   #00000000b, &P7OUT               

        mov.b   #00000000b, &P8SEL
        mov.b   #00000110b, &P8DIR
        mov.b   #00000000b, &P8OUT   
 
        
        mov.b   #0, R10  //SER pattern
        mov.b   #0, R13  //SER PIN
        mov.b   #0, R14  //SRCLK PIN
        mov.b   #0, R15  //RCLK PIN

        bic.b   #BIT0, &P7OUT      //OE, 0 = enable
        bis.b   #BIT2, &P8OUT      //SRCLR 0 = clear
        call    #CLEAR
        /////////////////////
START:
/*-------------------LEFT+RIGHT CIRCLE-------------------*/
        mov.w   #0x4544,&0x2700 
        mov.w   #0xcdcd,&0x2702
        mov.b   #00001000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4643,&0x2700
        mov.w   #0x4544,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.b   #00001000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4643,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.w   #0x4643,&0x2700
        mov.w   #0x4544,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.b   #00011000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4742,&0x2800
        mov.w   #0x4643,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x4643,&0x2700
        mov.w   #0x4544,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.b   #00011000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4742,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x4742,&0x2800
        mov.w   #0x4643,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x4643,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.b   #00111000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4742,&0x2900
        mov.w   #0x4841,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x4742,&0x2800
        mov.w   #0x4643,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.b   #00111000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4841,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x4742,&0x2900
        mov.w   #0x4841,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x4742,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.b   #01110000b, R14
        mov.w   #38, R13
        call    #QS
        
        mov.w   #0x4841,&0x2B00
        mov.w   #0xcdcd,&0x2B02
        mov.w   #0x4841,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x4742,&0x2900
        mov.w   #0x4841,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.b   #11100000b, R14
        mov.w   #90, R13
        call    #QS
        
        mov.w   #0x3851,&0x2B00
        mov.w   #0x4841,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.w   #0x4841,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x4742,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.b   #11100000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x2861,&0x2B00
        mov.w   #0x3851,&0x2B02
        mov.w   #0x4841,&0x2B04
        mov.w   #0xcdcd,&0x2B06
        mov.w   #0x4841,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.b   #11000000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2B00
        mov.w   #0x2861,&0x2B02
        mov.w   #0x3851,&0x2B04
        mov.w   #0x4841,&0x2B06
        mov.w   #0x1376,&0x2B08
        mov.w   #0x2366,&0x2B0A
        mov.w   #0x3356,&0x2B0C
        mov.w   #0x4346,&0x2B0E
        mov.w   #0xcdcd,&0x2B10
        mov.b   #10000000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2A00
        mov.w   #0x1376,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x1871,&0x2B00
        mov.w   #0x2861,&0x2B02
        mov.w   #0x3851,&0x2B04
        mov.w   #0x1376,&0x2B06
        mov.w   #0x2366,&0x2B08
        mov.w   #0x3356,&0x2B0A
        mov.w   #0xcdcd,&0x2B0C
        mov.b   #11000000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2900
        mov.w   #0x1376,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x1871,&0x2A00
        mov.w   #0x1376,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x1871,&0x2B00
        mov.w   #0x2861,&0x2B02
        mov.w   #0x1376,&0x2B04
        mov.w   #0x2366,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #11100000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2800
        mov.w   #0x1376,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1871,&0x2900
        mov.w   #0x1376,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x1871,&0x2A00
        mov.w   #0x1376,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x1871,&0x2B00
        mov.w   #0x1376,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.b   #11110000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2700
        mov.w   #0x1376,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x1871,&0x2800
        mov.w   #0x1376,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1871,&0x2900
        mov.w   #0x1376,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x1871,&0x2A00
        mov.w   #0x1376,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.b   #01111000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2600
        mov.w   #0x1376,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.w   #0x1871,&0x2700
        mov.w   #0x1376,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x1871,&0x2800
        mov.w   #0x1376,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1871,&0x2900
        mov.w   #0x1376,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.b   #00111100b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2500
        mov.w   #0x1376,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.w   #0x1871,&0x2600
        mov.w   #0x1376,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.w   #0x1871,&0x2700
        mov.w   #0x1376,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x1871,&0x2800
        mov.w   #0x1376,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.b   #00011110b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2400
        mov.w   #0x1376,&0x2402
        mov.w   #0xcdcd,&0x2404
        mov.w   #0x1871,&0x2500
        mov.w   #0x1376,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.w   #0x1871,&0x2600
        mov.w   #0x1376,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.w   #0x1871,&0x2700
        mov.w   #0x1376,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.b   #00001111b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x2861,&0x2400
        mov.w   #0x1871,&0x2402
        mov.w   #0x2366,&0x2404
        mov.w   #0x1376,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.w   #0x1871,&0x2500
        mov.w   #0x1376,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.w   #0x1871,&0x2600
        mov.w   #0x1376,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.b   #00000111b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x3851,&0x2400
        mov.w   #0x2861,&0x2402
        mov.w   #0x1871,&0x2404
        mov.w   #0x3356,&0x2406
        mov.w   #0x2366,&0x2408
        mov.w   #0x1376,&0x240A
        mov.w   #0xcdcd,&0x240C
        mov.w   #0x1871,&0x2500
        mov.w   #0x1376,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.b   #00000011b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x4841,&0x2400
        mov.w   #0x3851,&0x2402
        mov.w   #0x2861,&0x2404
        mov.w   #0x1871,&0x2406
        mov.w   #0x4346,&0x2408
        mov.w   #0x3356,&0x240A
        mov.w   #0x2366,&0x240C
        mov.w   #0x1376,&0x240E
        mov.w   #0xcdcd,&0x2410
        mov.b   #00000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x5831,&0x2400
        mov.w   #0x4841,&0x2402
        mov.w   #0x3851,&0x2404
        mov.w   #0x2861,&0x2406
        mov.w   #0x5336,&0x2408
        mov.w   #0x4346,&0x240A
        mov.w   #0x3356,&0x240C
        mov.w   #0x2366,&0x240E
        mov.w   #0xcdcd,&0x2410
        mov.b   #00000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x6821,&0x2400
        mov.w   #0x5831,&0x2402
        mov.w   #0x4841,&0x2404
        mov.w   #0x3851,&0x2406
        mov.w   #0x6326,&0x2408
        mov.w   #0x5336,&0x240A
        mov.w   #0x4346,&0x240C
        mov.w   #0x3356,&0x240E
        mov.w   #0xcdcd,&0x2410
        mov.b   #00000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2400
        mov.w   #0x6821,&0x2402
        mov.w   #0x5831,&0x2404
        mov.w   #0x4841,&0x2406
        mov.w   #0x7316,&0x2408
        mov.w   #0x6326,&0x240A
        mov.w   #0x5336,&0x240C
        mov.w   #0x4346,&0x240E
        mov.w   #0xcdcd,&0x2410
        mov.b   #00000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2500
        mov.w   #0x7316,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.w   #0x7811,&0x2400
        mov.w   #0x6821,&0x2402
        mov.w   #0x5831,&0x2404
        mov.w   #0x7316,&0x2406
        mov.w   #0x6326,&0x2408
        mov.w   #0x5336,&0x240A
        mov.w   #0xcdcd,&0x240C
        mov.b   #00000011b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2600
        mov.w   #0x7316,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.w   #0x7811,&0x2500
        mov.w   #0x7316,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.w   #0x7811,&0x2400
        mov.w   #0x6821,&0x2402
        mov.w   #0x7316,&0x2404
        mov.w   #0x6326,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.b   #00000111b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2700
        mov.w   #0x7316,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x7811,&0x2600
        mov.w   #0x7316,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.w   #0x7811,&0x2500
        mov.w   #0x7316,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.w   #0x7811,&0x2400
        mov.w   #0x7316,&0x2402
        mov.w   #0xcdcd,&0x2404
        mov.b   #00001111b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2800
        mov.w   #0x7316,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x7811,&0x2700
        mov.w   #0x7316,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x7811,&0x2600
        mov.w   #0x7316,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.w   #0x7811,&0x2500
        mov.w   #0x7316,&0x2502
        mov.w   #0xcdcd,&0x2504
        mov.b   #00011110b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2900
        mov.w   #0x7316,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x7811,&0x2800
        mov.w   #0x7316,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x7811,&0x2700
        mov.w   #0x7316,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x7811,&0x2600
        mov.w   #0x7316,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.b   #00111100b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2A00
        mov.w   #0x7316,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x7811,&0x2900
        mov.w   #0x7316,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x7811,&0x2800
        mov.w   #0x7316,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x7811,&0x2700
        mov.w   #0x7316,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.b   #01111000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x7811,&0x2B00
        mov.w   #0x7316,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.w   #0x7811,&0x2A00
        mov.w   #0x7316,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x7811,&0x2900
        mov.w   #0x7316,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x7811,&0x2800
        mov.w   #0x7316,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.b   #11110000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x6821,&0x2B00
        mov.w   #0x7811,&0x2B02
        mov.w   #0x6326,&0x2B04
        mov.w   #0x7316,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.w   #0x7811,&0x2A00
        mov.w   #0x7316,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x7811,&0x2900
        mov.w   #0x7316,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.b   #11100000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x5831,&0x2B00
        mov.w   #0x6821,&0x2B02
        mov.w   #0x7811,&0x2B04
        mov.w   #0x5336,&0x2B06
        mov.w   #0x6326,&0x2B08
        mov.w   #0x7316,&0x2B0A
        mov.w   #0xcdcd,&0x2B0C
        mov.w   #0x7811,&0x2A00
        mov.w   #0x7316,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.b   #11000000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x4841,&0x2B00
        mov.w   #0x5831,&0x2B02
        mov.w   #0x6821,&0x2B04
        mov.w   #0x7811,&0x2B06
        mov.w   #0x4346,&0x2B08
        mov.w   #0x5336,&0x2B0A
        mov.w   #0x6326,&0x2B0C
        mov.w   #0x7316,&0x2B0E
        mov.w   #0xcdcd,&0x2B10
        mov.b   #10000000b, R14
        mov.w   #2, R13
        call    #QS
/*-------------------FRONT+BACK CIRCLE-------------------*/
        mov.w   #0x4742,&0x2B00
        mov.w   #0x4841,&0x2B02
        mov.w   #0x5831,&0x2B04
        mov.w   #0x6821,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #10000000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x3752,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x4742,&0x2B00
        mov.w   #0x4841,&0x2B02
        mov.w   #0x5831,&0x2B04
        mov.w   #0xcdcd,&0x2B06
        mov.b   #11000000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x3554,&0x2A00
        mov.w   #0x3653,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x4742,&0x2B00
        mov.w   #0x4841,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.b   #11000000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x2465,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x3554,&0x2A00
        mov.w   #0x3653,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.w   #0x4742,&0x2B00
        mov.w   #0xcdcd,&0x2B02
        mov.b   #11100000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x1475,&0x2900
        mov.w   #0x2465,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x3554,&0x2A00
        mov.w   #0x3653,&0x2A02
        mov.w   #0xcdcd,&0x2A04
        mov.b   #01100000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x1376,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.w   #0x1475,&0x2900
        mov.w   #0x2465,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x3554,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.b   #01110000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x1277,&0x2800
        mov.w   #0x1376,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1475,&0x2900
        mov.w   #0x2465,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.b   #00110000b, R14
        mov.w   #25, R13
        call    #QS
        
        mov.w   #0x1178,&0x2800
        mov.w   #0x1277,&0x2802
        mov.w   #0x1376,&0x2804
        mov.w   #0xcdcd,&0x2806
        mov.w   #0x1475,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.b   #00110000b, R14
        mov.w   #90, R13
        call    #QS
        
        mov.w   #0x1178,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x1178,&0x2800
        mov.w   #0x1277,&0x2802
        mov.w   #0x1376,&0x2804
        mov.w   #0x5138,&0x2806
        mov.w   #0xcdcd,&0x2808
        mov.b   #00011000b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1178,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x1178,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x1178,&0x2800
        mov.w   #0x1277,&0x2802
        mov.w   #0x5138,&0x2804
        mov.w   #0xcdcd,&0x2806
        mov.w   #0x5138,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.b   #00111100b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1178,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x1178,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x1178,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x1178,&0x2800
        mov.w   #0x5138,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x5138,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5138,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.b   #01111110b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1178,&0x2400
        mov.w   #0xcdcd,&0x2402
        mov.w   #0x1178,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x1178,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x1178,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x5138,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.w   #0x5138,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5138,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5138,&0x2B00
        mov.w   #0xcdcd,&0x2B02
        mov.b   #11111111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1277,&0x2400
        mov.w   #0x1178,&0x2402
        mov.w   #0xcdcd,&0x2404
        mov.w   #0x1178,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x1178,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x5138,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5138,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5237,&0x2B00
        mov.w   #0x5138,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.b   #11100111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1376,&0x2400
        mov.w   #0x1277,&0x2402
        mov.w   #0x1178,&0x2404
        mov.w   #0xcdcd,&0x2406
        mov.w   #0x1178,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5138,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5336,&0x2B00
        mov.w   #0x5237,&0x2B02
        mov.w   #0x5138,&0x2B04
        mov.w   #0xcdcd,&0x2B06
        mov.b   #11000011b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1475,&0x2400
        mov.w   #0x1376,&0x2402
        mov.w   #0x1277,&0x2404
        mov.w   #0x1178,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.w   #0x5435,&0x2B00
        mov.w   #0x5336,&0x2B02
        mov.w   #0x5237,&0x2B04
        mov.w   #0x5138,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1574,&0x2400
        mov.w   #0x1475,&0x2402
        mov.w   #0x1376,&0x2404
        mov.w   #0x1277,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.w   #0x5534,&0x2B00
        mov.w   #0x5435,&0x2B02
        mov.w   #0x5336,&0x2B04
        mov.w   #0x5237,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1673,&0x2400
        mov.w   #0x1574,&0x2402
        mov.w   #0x1475,&0x2404
        mov.w   #0x1376,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.w   #0x5633,&0x2B00
        mov.w   #0x5534,&0x2B02
        mov.w   #0x5435,&0x2B04
        mov.w   #0x5336,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1772,&0x2400
        mov.w   #0x1673,&0x2402
        mov.w   #0x1574,&0x2404
        mov.w   #0x1475,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.w   #0x5732,&0x2B00
        mov.w   #0x5633,&0x2B02
        mov.w   #0x5534,&0x2B04
        mov.w   #0x5435,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2400
        mov.w   #0x1772,&0x2402
        mov.w   #0x1673,&0x2404
        mov.w   #0x1574,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.w   #0x5831,&0x2B00
        mov.w   #0x5732,&0x2B02
        mov.w   #0x5633,&0x2B04
        mov.w   #0x5534,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1871,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x1871,&0x2400
        mov.w   #0x1772,&0x2402
        mov.w   #0x1673,&0x2404
        mov.w   #0xcdcd,&0x2406
        mov.w   #0x5831,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5831,&0x2B00
        mov.w   #0x5732,&0x2B02
        mov.w   #0x5633,&0x2B04
        mov.w   #0xcdcd,&0x2B06
        mov.b   #11000011b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1871,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x1871,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x1871,&0x2400
        mov.w   #0x1772,&0x2402
        mov.w   #0xcdcd,&0x2404
        mov.w   #0x5831,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5831,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5831,&0x2B00
        mov.w   #0x5732,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.b   #11100111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1871,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x1871,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x1871,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x1871,&0x2400
        mov.w   #0xcdcd,&0x2402
        mov.w   #0x5831,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.w   #0x5831,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5831,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5831,&0x2B00
        mov.w   #0xcdcd,&0x2B02
        mov.b   #11111111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1871,&0x2800
        mov.w   #0x5831,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1871,&0x2700
        mov.w   #0x5831,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x1871,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x1871,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5831,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5831,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.b   #01111110b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1871,&0x2900
        mov.w   #0x5831,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x1871,&0x2800
        mov.w   #0x5831,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1871,&0x2700
        mov.w   #0x5831,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x1871,&0x2600
        mov.w   #0x5831,&0x2602
        mov.w   #0xcdcd,&0x2604
        mov.b   #00111100b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1871,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x1871,&0x2900
        mov.w   #0x5831,&0x2902
        mov.w   #0xcdcd,&0x2904
        mov.w   #0x1871,&0x2800
        mov.w   #0x5831,&0x2802
        mov.w   #0xcdcd,&0x2804
        mov.w   #0x1871,&0x2700
        mov.w   #0x5831,&0x2702
        mov.w   #0xcdcd,&0x2704
        mov.w   #0x5831,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x5831,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.b   #01111110b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1871,&0x2B00
        mov.w   #0xcdcd,&0x2B02
        mov.w   #0x1871,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x1871,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x1871,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.w   #0x5831,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x5831,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x5831,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5831,&0x2400
        mov.w   #0xcdcd,&0x2402
        mov.b   #11111111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1772,&0x2B00
        mov.w   #0x1871,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.w   #0x1871,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x1871,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x5831,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x5831,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5732,&0x2400
        mov.w   #0x5831,&0x2402
        mov.w   #0xcdcd,&0x2404
        mov.b   #11100111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1673,&0x2B00
        mov.w   #0x1772,&0x2B02
        mov.w   #0x1871,&0x2B04
        mov.w   #0xcdcd,&0x2B06
        mov.w   #0x1871,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x5831,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5633,&0x2400
        mov.w   #0x5732,&0x2402
        mov.w   #0x5831,&0x2404
        mov.w   #0xcdcd,&0x2406
        mov.b   #11000011b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1574,&0x2B00
        mov.w   #0x1673,&0x2B02
        mov.w   #0x1772,&0x2B04
        mov.w   #0x1871,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.w   #0x5534,&0x2400
        mov.w   #0x5633,&0x2402
        mov.w   #0x5732,&0x2404
        mov.w   #0x5831,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1475,&0x2B00
        mov.w   #0x1574,&0x2B02
        mov.w   #0x1673,&0x2B04
        mov.w   #0x1772,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.w   #0x5435,&0x2400
        mov.w   #0x5534,&0x2402
        mov.w   #0x5633,&0x2404
        mov.w   #0x5732,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1376,&0x2B00
        mov.w   #0x1475,&0x2B02
        mov.w   #0x1574,&0x2B04
        mov.w   #0x1673,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.w   #0x5336,&0x2400
        mov.w   #0x5435,&0x2402
        mov.w   #0x5534,&0x2404
        mov.w   #0x5633,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1277,&0x2B00
        mov.w   #0x1376,&0x2B02
        mov.w   #0x1475,&0x2B04
        mov.w   #0x1574,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.w   #0x5237,&0x2400
        mov.w   #0x5336,&0x2402
        mov.w   #0x5435,&0x2404
        mov.w   #0x5534,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1178,&0x2B00
        mov.w   #0x1277,&0x2B02
        mov.w   #0x1376,&0x2B04
        mov.w   #0x1475,&0x2B06
        mov.w   #0xcdcd,&0x2B08
        mov.w   #0x5138,&0x2400
        mov.w   #0x5237,&0x2402
        mov.w   #0x5336,&0x2404
        mov.w   #0x5435,&0x2406
        mov.w   #0xcdcd,&0x2408
        mov.b   #10000001b, R14
        mov.w   #2, R13
        call    #QS
        
        mov.w   #0x1178,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x1178,&0x2B00
        mov.w   #0x1277,&0x2B02
        mov.w   #0x1376,&0x2B04
        mov.w   #0xcdcd,&0x2B06
        mov.w   #0x5138,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5138,&0x2400
        mov.w   #0x5237,&0x2402
        mov.w   #0x5336,&0x2404
        mov.w   #0xcdcd,&0x2406
        mov.b   #11000011b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1178,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x1178,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x1178,&0x2B00
        mov.w   #0x1277,&0x2B02
        mov.w   #0xcdcd,&0x2B04
        mov.w   #0x5138,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x5138,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5138,&0x2400
        mov.w   #0x5237,&0x2402
        mov.w   #0xcdcd,&0x2404
        mov.b   #11100111b, R14
        mov.w   #1, R13
        call    #QS
        
        mov.w   #0x1178,&0x2800
        mov.w   #0xcdcd,&0x2802
        mov.w   #0x1178,&0x2900
        mov.w   #0xcdcd,&0x2902
        mov.w   #0x1178,&0x2A00
        mov.w   #0xcdcd,&0x2A02
        mov.w   #0x1178,&0x2B00
        mov.w   #0xcdcd,&0x2B02
        mov.w   #0x5138,&0x2700
        mov.w   #0xcdcd,&0x2702
        mov.w   #0x5138,&0x2600
        mov.w   #0xcdcd,&0x2602
        mov.w   #0x5138,&0x2500
        mov.w   #0xcdcd,&0x2502
        mov.w   #0x5138,&0x2400
        mov.w   #0xcdcd,&0x2402
        mov.b   #11111111b, R14
        mov.w   #1, R13
        call    #QS
/*-------------------UP+DOWN CIRCLE-------------------*/
        
        
        br      #START
        
        JMP $                           ; jump to current location '$'
                                        ; (endless loop)
        
QS:
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R10
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x23FF, R10
LEVEL1:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT2
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L1E
L1S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L1S
L1E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL1
        
NXT2:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x24FF, R10
LEVEL2:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT3
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L2E
L2S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L2S
L2E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL2

NXT3:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x25FF, R10
LEVEL3:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT4
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L3E
L3S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L3S
L3E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL3
        
NXT4:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x26FF, R10
LEVEL4:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT5
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L4E
L4S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L4S
L4E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL4
        
NXT5:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x27FF, R10
LEVEL5:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT6
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L5E
L5S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L5S
L5E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL5
        
NXT6:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x28FF, R10
LEVEL6:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT7
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L6E
L6S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L6S
L6E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL6

NXT7:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x29FF, R10
LEVEL7:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      NXT8
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L7E
L7S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L7S
L7E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL7

NXT8:
        push.w  &0x3200
        push.w  &0x3202
        push.w  &0x3204
        push.w  &0x3206
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        mov.w   #0x2AFF, R10
LEVEL8:
        mov.w   #0x31FF, R7
        add.w   #1, R10
        mov.b   @R10, R5
        cmp.b   #0xCD,R5
        jz      LEVEL_END
        mov.b   R5, R6
        bic.b   #11110000b,R6
        rra.w   R5
        rra.w   R5
        rra.w   R5
        rra.w   R5
        
        clr.w   R8
        add.w   R5, R7
        add.b   #1, R8
        sub.w   #1, R6
        jz      L8E
L8S:
        rla.b   R8
        sub.w   #1, R6
        jnz     L8S
L8E:
        bis.b   R8, 0(R7)
        
        jmp     LEVEL8
        
        
LEVEL_END:
        mov.w  &0x3200,&0x3270
        mov.w  &0x3202,&0x3272
        mov.w  &0x3204,&0x3274
        mov.w  &0x3206,&0x3276
        clr.w   &0x3200
        clr.w   &0x3202
        clr.w   &0x3204
        clr.w   &0x3206
        pop.w  &0x3266
        pop.w  &0x3264
        pop.w  &0x3262
        pop.w  &0x3260
        pop.w  &0x3256
        pop.w  &0x3254
        pop.w  &0x3252
        pop.w  &0x3250
        pop.w  &0x3246
        pop.w  &0x3244
        pop.w  &0x3242
        pop.w  &0x3240
        pop.w  &0x3236
        pop.w  &0x3234
        pop.w  &0x3232
        pop.w  &0x3230
        pop.w  &0x3226
        pop.w  &0x3224
        pop.w  &0x3222
        pop.w  &0x3220
        pop.w  &0x3216
        pop.w  &0x3214
        pop.w  &0x3212
        pop.w  &0x3210
        pop.w  &0x3206
        pop.w  &0x3204
        pop.w  &0x3202
        pop.w  &0x3200

        /*---start lighting---*/
        
        /*---check Level1---*/
CL1:
        mov.b   R14,R7
        bic.b   #11111110b,R7
        cmp.b   #1b,R7
        jnz     CL2
        
        mov.b   #11111111b, R10
        call    #IC_L
CK_IC_1_0:
        cmp.b   &0x3200,&0x3280
        jz      CK_IC_2_0
        mov.b   &0x3200,R10
        call    #IC_1
CK_IC_2_0:
        cmp.b   &0x3201,&0x3281
        jz      CK_IC_3_0
        mov.b   &0x3201,R10
        call    #IC_2
CK_IC_3_0:
        cmp.b   &0x3202,&0x3282
        jz      CK_IC_4_0
        mov.b   &0x3202,R10
        call    #IC_3
CK_IC_4_0:
        cmp.b   &0x3203,&0x3283
        jz      CK_IC_5_0
        mov.b   &0x3203,R10
        call    #IC_4
CK_IC_5_0:
        cmp.b   &0x3204,&0x3284
        jz      CK_IC_6_0
        mov.b   &0x3204,R10
        call    #IC_5
CK_IC_6_0:
        cmp.b   &0x3205,&0x3285
        jz      CK_IC_7_0
        mov.b   &0x3205,R10
        call    #IC_6
CK_IC_7_0:
        cmp.b   &0x3206,&0x3286
        jz      CK_IC_8_0
        mov.b   &0x3206,R10
        call    #IC_7
CK_IC_8_0:
        cmp.b   &0x3207,&0x3287
        jz      CK_IC_9_0
        mov.b   &0x3207,R10
        call    #IC_8
CK_IC_9_0:
        
        mov.b   #01111111b, R10
        call    #IC_L
        
        
        /*---check Level2---*/
CL2:
        mov.b   R14,R7
        bic.b   #11111101b,R7
        cmp.b   #10b,R7
        jnz     CL3
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_1:
        cmp.b   &0x3210, &0x3280
        jz      CK_IC_2_1
        mov.b   &0x3210, R10
        call    #IC_1
CK_IC_2_1:
        cmp.b   &0x3211,&0x3281
        jz      CK_IC_3_1
        mov.b   &0x3211,R10
        call    #IC_2
CK_IC_3_1:
        cmp.b   &0x3212,&0x3282
        jz      CK_IC_4_1
        mov.b   &0x3212,R10
        call    #IC_3
CK_IC_4_1:
        cmp.b   &0x3213,&0x3283
        jz      CK_IC_5_1
        mov.b   &0x3213,R10
        call    #IC_4
CK_IC_5_1:
        cmp.b   &0x3214,&0x3284
        jz      CK_IC_6_1
        mov.b   &0x3214,R10
        call    #IC_5
CK_IC_6_1:
        cmp.b   &0x3215,&0x3285
        jz      CK_IC_7_1
        mov.b   &0x3215,R10
        call    #IC_6
CK_IC_7_1:
        cmp.b   &0x3216,&0x3286
        jz      CK_IC_8_1
        mov.b   &0x3216,R10
        call    #IC_7
CK_IC_8_1:
        cmp.b   &0x3217,&0x3287
        jz      CK_IC_9_1
        mov.b   &0x3217,R10
        call    #IC_8
CK_IC_9_1:
      
        mov.b   #10111111b, R10
        call    #IC_L
        
        
        /*---check Level3---*/
CL3:
        mov.b   R14,R7
        bic.b   #11111011b,R7
        cmp.b   #100b,R7
        jnz     CL4
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_2:
        cmp.b   &0x3220,&0x3280
        jz      CK_IC_2_2
        mov.b   &0x3220,R10
        call    #IC_1
CK_IC_2_2:
        cmp.b   &0x3221,&0x3281
        jz      CK_IC_3_2
        mov.b   &0x3221,R10
        call    #IC_2
CK_IC_3_2:
        cmp.b   &0x3222,&0x3282
        jz      CK_IC_4_2
        mov.b   &0x3222,R10
        call    #IC_3
CK_IC_4_2:
        cmp.b   &0x3223,&0x3283
        jz      CK_IC_5_2
        mov.b   &0x3223,R10
        call    #IC_4
CK_IC_5_2:
        cmp.b   &0x3224,&0x3284
        jz      CK_IC_6_2
        mov.b   &0x3224,R10
        call    #IC_5
CK_IC_6_2:
        cmp.b   &0x3225,&0x3285
        jz      CK_IC_7_2
        mov.b   &0x3225,R10
        call    #IC_6
CK_IC_7_2:
        cmp.b   &0x3226,&0x3286
        jz      CK_IC_8_2
        mov.b   &0x3226,R10
        call    #IC_7
CK_IC_8_2:
        cmp.b   &0x3227,&0x3287
        jz      CK_IC_9_2
        mov.b   &0x3227,R10
        call    #IC_8
CK_IC_9_2:
        
        mov.b   #11011111b, R10
        call    #IC_L
        
        
        /*---check Level4---*/
CL4:
        mov.b   R14,R7
        bic.b   #11110111b,R7
        cmp.b   #1000b,R7
        jnz     CL5
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_3:
        cmp.b   &0x3230,&0x3280
        jz      CK_IC_2_3
        mov.b   &0x3230,R10
        call    #IC_1
CK_IC_2_3:
        cmp.b   &0x3231,&0x3281
        jz      CK_IC_3_3
        mov.b   &0x3231,R10
        call    #IC_2
CK_IC_3_3:
        cmp.b   &0x3232,&0x3282
        jz      CK_IC_4_3
        mov.b   &0x3232,R10
        call    #IC_3
CK_IC_4_3:
        cmp.b   &0x3233,&0x3283
        jz      CK_IC_5_3
        mov.b   &0x3233,R10
        call    #IC_4
CK_IC_5_3:
        cmp.b   &0x3234,&0x3284
        jz      CK_IC_6_3
        mov.b   &0x3234,R10
        call    #IC_5
CK_IC_6_3:
        cmp.b   &0x3235,&0x3285
        jz      CK_IC_7_3
        mov.b   &0x3235,R10
        call    #IC_6
CK_IC_7_3:
        cmp.b   &0x3236,&0x3286
        jz      CK_IC_8_3
        mov.b   &0x3236,R10
        call    #IC_7
CK_IC_8_3:
        cmp.b   &0x3237,&0x3287
        jz      CK_IC_9_3
        mov.b   &0x3237,R10
        call    #IC_8
CK_IC_9_3:
        
        mov.b   #11101111b, R10
        call    #IC_L
        
        /*---check Level5---*/
CL5:
        mov.b   R14,R7
        bic.b   #11101111b,R7
        cmp.b   #10000b,R7
        jnz     CL6
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_4:
        cmp.b   &0x3240,&0x3280
        jz      CK_IC_2_4
        mov.b   &0x3240,R10
        call    #IC_1
CK_IC_2_4:
        cmp.b   &0x3241,&0x3281
        jz      CK_IC_3_4
        mov.b   &0x3241,R10
        call    #IC_2
CK_IC_3_4:
        cmp.b   &0x3242,&0x3282
        jz      CK_IC_4_4
        mov.b   &0x3242,R10
        call    #IC_3
CK_IC_4_4:
        cmp.b   &0x3243,&0x3283
        jz      CK_IC_5_4
        mov.b   &0x3243,R10
        call    #IC_4
CK_IC_5_4:
        cmp.b   &0x3244,&0x3284
        jz      CK_IC_6_4
        mov.b   &0x3244,R10
        call    #IC_5
CK_IC_6_4:
        cmp.b   &0x3245,&0x3285
        jz      CK_IC_7_4
        mov.b   &0x3245,R10
        call    #IC_6
CK_IC_7_4:
        cmp.b   &0x3246,&0x3286
        jz      CK_IC_8_4
        mov.b   &0x3246,R10
        call    #IC_7
CK_IC_8_4:
        cmp.b   &0x3247,&0x3287
        jz      CK_IC_9_4
        mov.b   &0x3247,R10
        call    #IC_8
CK_IC_9_4:
        
        mov.b   #11110111b, R10
        call    #IC_L
        
        /*---check Level6---*/
CL6:
        mov.b   R14,R7
        bic.b   #11011111b,R7
        cmp.b   #100000b,R7
        jnz     CL7
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_5:
        cmp.b   &0x3250,&0x3280
        jz      CK_IC_2_5
        mov.b   &0x3250,R10
        call    #IC_1
CK_IC_2_5:
        cmp.b   &0x3251,&0x3281
        jz      CK_IC_3_5
        mov.b   &0x3251,R10
        call    #IC_2
CK_IC_3_5:
        cmp.b   &0x3252,&0x3282
        jz      CK_IC_4_5
        mov.b   &0x3252,R10
        call    #IC_3
CK_IC_4_5:
        cmp.b   &0x3253,&0x3283
        jz      CK_IC_5_5
        mov.b   &0x3253,R10
        call    #IC_4
CK_IC_5_5:
        cmp.b   &0x3254,&0x3284
        jz      CK_IC_6_5
        mov.b   &0x3254,R10
        call    #IC_5
CK_IC_6_5:
        cmp.b   &0x3255,&0x3285
        jz      CK_IC_7_5
        mov.b   &0x3255,R10
        call    #IC_6
CK_IC_7_5:
        cmp.b   &0x3256,&0x3286
        jz      CK_IC_8_5
        mov.b   &0x3256,R10
        call    #IC_7
CK_IC_8_5:
        cmp.b   &0x3257,&0x3287
        jz      CK_IC_9_5
        mov.b   &0x3257,R10
        call    #IC_8
CK_IC_9_5:
        
        mov.b   #11111011b, R10
        call    #IC_L
        
        /*---check Level7---*/
CL7:
        mov.b   R14,R7
        bic.b   #10111111b,R7
        cmp.b   #1000000b,R7
        jnz     CL8
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_6:
        cmp.b   &0x3260,&0x3280
        jz      CK_IC_2_6
        mov.b   &0x3260,R10
        call    #IC_1
CK_IC_2_6:
        cmp.b   &0x3261,&0x3281
        jz      CK_IC_3_6
        mov.b   &0x3261,R10
        call    #IC_2
CK_IC_3_6:
        cmp.b   &0x3262,&0x3282
        jz      CK_IC_4_6
        mov.b   &0x3262,R10
        call    #IC_3
CK_IC_4_6:
        cmp.b   &0x3263,&0x3283
        jz      CK_IC_5_6
        mov.b   &0x3263,R10
        call    #IC_4
CK_IC_5_6:
        cmp.b   &0x3264,&0x3284
        jz      CK_IC_6_6
        mov.b   &0x3264,R10
        call    #IC_5
CK_IC_6_6:
        cmp.b   &0x3265,&0x3285
        jz      CK_IC_7_6
        mov.b   &0x3265,R10
        call    #IC_6
CK_IC_7_6:
        cmp.b   &0x3266,&0x3286
        jz      CK_IC_8_6
        mov.b   &0x3266,R10
        call    #IC_7
CK_IC_8_6:
        cmp.b   &0x3267,&0x3287
        jz      CK_IC_9_6
        mov.b   &0x3267,R10
        call    #IC_8
CK_IC_9_6:
        
        mov.b   #11111101b, R10
        call    #IC_L
        
        /*---check Level8---*/
CL8:
        mov.b   R14,R7
        bic.b   #01111111b,R7
        cmp.b   #10000000b,R7
        jnz     CL9
        
        mov.b   #11111111b, R10
        call    #IC_L
        
CK_IC_1_7:
        cmp.b   &0x3270,&0x3280
        jz      CK_IC_2_7
        mov.b   &0x3270,R10
        call    #IC_1
CK_IC_2_7:
        cmp.b   &0x3271,&0x3281
        jz      CK_IC_3_7
        mov.b   &0x3271,R10
        call    #IC_2
CK_IC_3_7:
        cmp.b   &0x3272,&0x3282
        jz      CK_IC_4_7
        mov.b   &0x3272,R10
        call    #IC_3
CK_IC_4_7:
        cmp.b   &0x3273,&0x3283
        jz      CK_IC_5_7
        mov.b   &0x3273,R10
        call    #IC_4
CK_IC_5_7:
        cmp.b   &0x3274,&0x3284
        jz      CK_IC_6_7
        mov.b   &0x3274,R10
        call    #IC_5
CK_IC_6_7:
        cmp.b   &0x3275,&0x3285
        jz      CK_IC_7_7
        mov.b   &0x3275,R10
        call    #IC_6
CK_IC_7_7:
        cmp.b   &0x3276,&0x3286
        jz      CK_IC_8_7
        mov.b   &0x3276,R10
        call    #IC_7
CK_IC_8_7:
        cmp.b   &0x3277,&0x3287
        jz      CK_IC_9_7
        mov.b   &0x3277,R10
        call    #IC_8
CK_IC_9_7:
        
        mov.b   #11111110b, R10
        call    #IC_L
        
CL9:
        sub.w   #1,R13
        jz      CL10
        br      #CL1
CL10:
        pop.w   R10
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        
        ret

CLEAR:
        mov.w   #0xcdcd,&0x2400
        mov.w   #0xcdcd,&0x2500
        mov.w   #0xcdcd,&0x2600
        mov.w   #0xcdcd,&0x2700
        mov.w   #0xcdcd,&0x2800
        mov.w   #0xcdcd,&0x2900
        mov.w   #0xcdcd,&0x2A00
        mov.w   #0xcdcd,&0x2B00
        mov.b   #00000000b, R10
        call    #IC_1
        call    #IC_2
        call    #IC_3
        call    #IC_4
        call    #IC_5
        call    #IC_6
        call    #IC_7
        call    #IC_8     
        ret

RUN:
        bic.b   R11, 0(R14)     //SRCLK
        bic.b   R12, 0(R15)     //RCLK
        mov.w   #8, R5
                
Loop:
        ////////SER1/////////////
        mov.b   R10, R6         //SER
        and.b   #00000001b, R6
        
        call    #SHIFT
        
        bic.b   R9, 0(R13)      
        bis.b   R6, 0(R13)
        
        /* SRCLK */
        bis.b   R11, 0(R14)
        xor.b   R11, 0(R14)      

        rra     R10     //shift right SER
        sub.w   #1, R5
        jnz     Loop
        ///////////////////////////        
        /* RCLK */
        bis.b   R12, 0(R15)
        xor.b   R12, 0(R15)
        
        ret

SHIFT:
        push    R8
L_SHIFT:
        cmp     #0, R8
        jeq     E_SHIFT
        rla     R6
        dec     R8
        jmp     L_SHIFT
E_SHIFT:
        pop     R8
        ret

IC_L:
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #7, R8
        mov.b   #BIT7, R9          //SER PIN.BIT
        mov.b   #BIT3, R11         //SRCLK PIN.BIT
        mov.b   #BIT6, R12         //RCLK  PIN.BIT    
        mov.w   #P2OUT, R13        //SER PIN
        mov.w   #P4OUT, R14        //SRCLK PIN
        mov.w   #P3OUT, R15        //RCLK PIN  
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        
        ret

IC_1:
        mov.b   R10, &0x3280
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #0, R8
        mov.b   #BIT0, R9          //SER PIN.BIT
        mov.b   #BIT1, R11         //SRCLK PIN.BIT
        mov.b   #BIT2, R12         //RCLK  PIN.BIT    
        mov.w   #P6OUT, R13        //SER PIN
        mov.w   #P6OUT, R14        //SRCLK PIN
        mov.w   #P6OUT, R15        //RCLK PIN  
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret
        
IC_2:
        mov.b   R10, &0x3281
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #2, R8
        mov.b   #BIT2, R9          //SER PIN.BIT
        mov.b   #BIT3, R11         //SRCLK PIN.BIT
        mov.b   #BIT4, R12         //RCLK  PIN.BIT    
        mov.w   #P3OUT, R13        //SER PIN
        mov.w   #P3OUT, R14        //SRCLK PIN
        mov.w   #P3OUT, R15        //RCLK PIN  
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret

IC_3:
        mov.b   R10, &0x3282
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #2, R8
        mov.b   #BIT2, R9          //SER PIN.BIT
        mov.b   #BIT3, R11         //SRCLK PIN.BIT
        mov.b   #BIT4, R12         //RCLK  PIN.BIT    
        mov.w   #P1OUT, R13        //SER PIN
        mov.w   #P1OUT, R14        //SRCLK PIN
        mov.w   #P1OUT, R15        //RCLK PIN  
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret

IC_4:
        mov.b   R10, &0x3283
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #4, R8
        mov.b   #BIT4, R9          //SER PIN.BIT
        mov.b   #BIT5, R11         //SRCLK PIN.BIT
        mov.b   #BIT6, R12         //RCLK  PIN.BIT    
        mov.w   #P2OUT, R13        //SER PIN
        mov.w   #P2OUT, R14        //SRCLK PIN
        mov.w   #P2OUT, R15        //RCLK PIN 
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret

IC_5:
        mov.b   R10, &0x3284
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #0, R8
        mov.b   #BIT0, R9          //SER PIN.BIT
        mov.b   #BIT1, R11         //SRCLK PIN.BIT
        mov.b   #BIT2, R12         //RCLK  PIN.BIT    
        mov.w   #P4OUT, R13        //SER PIN
        mov.w   #P4OUT, R14        //SRCLK PIN
        mov.w   #P4OUT, R15        //RCLK PIN  
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret

IC_6:
        mov.b   R10, &0x3285
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #0, R8
        mov.b   #BIT0, R9          //SER PIN.BIT
        mov.b   #BIT1, R11         //SRCLK PIN.BIT
        mov.b   #BIT5, R12         //RCLK  PIN.BIT    
        mov.w   #P3OUT, R13        //SER PIN
        mov.w   #P3OUT, R14        //SRCLK PIN
        mov.w   #P3OUT, R15        //RCLK PIN  
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret
        
IC_7:
        mov.b   R10, &0x3286
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #5, R8
        mov.b   #BIT5, R9          //SER PIN.BIT
        mov.b   #BIT6, R11         //SRCLK PIN.BIT
        mov.b   #BIT6, R12         //RCLK  PIN.BIT    
        mov.w   #P6OUT, R13        //SER PIN
        mov.w   #P6OUT, R14        //SRCLK PIN
        mov.w   #P1OUT, R15        //RCLK PIN 
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret

IC_8:
        mov.b   R10, &0x3287
        push.w  R5
        push.w  R6
        push.w  R7
        push.w  R8
        push.w  R9
        push.w  R10
        push.w  R11
        push.w  R12
        push.w  R13
        push.w  R14
        push.w  R15
        
        mov.b   #0, R8
        mov.b   #BIT0, R9          //SER PIN.BIT
        mov.b   #BIT2, R11         //SRCLK PIN.BIT
        mov.b   #BIT3, R12         //RCLK  PIN.BIT    
        mov.w   #P2OUT, R13        //SER PIN
        mov.w   #P2OUT, R14        //SRCLK PIN
        mov.w   #P2OUT, R15        //RCLK PIN
        call    #RUN
        
        pop.w   R15
        pop.w   R14
        pop.w   R13
        pop.w   R12
        pop.w   R11
        pop.w   R10
        pop.w   R9
        pop.w   R8
        pop.w   R7
        pop.w   R6
        pop.w   R5
        ret

DELAY:
    push    R5
    push    R6
DLOOP:    
    cmp     #0,R15	; parameter
    jeq     EXIT	
    mov.w   #100, R5	; For outer loop
        loop1:			; Outer loop
            nop			; Do nothing
            cmp #0,R5	
            jeq EXIT2	; Quit outer loop
            mov.w #166,R6	; For inner loop
            loop2:			; Inner loop
                cmp #0,R6	
                jeq EXIT1	; Quit inner loop
                dec R6
                jmp loop2
            EXIT1:
                dec R5
                jmp loop1               
        EXIT2:
            dec R15
            jmp DLOOP	
    EXIT:  
        pop R6
        pop R5
        ret